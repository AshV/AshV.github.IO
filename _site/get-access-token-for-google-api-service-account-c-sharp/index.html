<!DOCTYPE html>
<html lang="en">

<head>
    
    
    
    <!-- Non social metatags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    
    <title>Get Access Token for Google Service Account using C#</title>
    
    
    












<!-- Place this data between the <head> tags of your website -->

<meta name="description" content="Service Accounts are used for server to server communication so user don’t need to interact for Authentication." />



  <meta name="keywords" itemprop="categories" content="Dynamics-365, PowerApps" />



<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image" />



<meta name="twitter:title" content="Get Access Token for Google Service Account using C#" />
<meta name="twitter:description" content="Service Accounts are used for server to server communication so user don’t need to interact for Authentication." />



<!-- Twitter summary card with large image must be at least 280x150px -->

<meta name="twitter:url" content="http://localhost:4000//get-access-token-for-google-api-service-account-c-sharp/" />

<!-- Open Graph data -->
<meta property="og:title" content="Get Access Token for Google Service Account using C#" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:4000//get-access-token-for-google-api-service-account-c-sharp/" />


<meta property="og:description" content="Service Accounts are used for server to server communication so user don’t need to interact for Authentication." />
<meta property="og:site_name" content="Ashish Vishwakarma" />


<meta property="og:locale" content="" />


  <meta property="article:published_time" content="2017-10-11T00:18:01+05:30" />




  





  
    <meta property="article:tag" content="Dynamics-365" />
  
    <meta property="article:tag" content="PowerApps" />
  




    
    
    <link rel="canonical" href="http://localhost:4000/get-access-token-for-google-api-service-account-c-sharp/">
    
    
    
    <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
    
    <meta name="robots" content="noarchive">
    
    <!-- <link rel="alternate" media="only screen and (max-width: 640px)" href="">
        <link rel="alternate" media="handheld" href=""> -->
        
        
        <link rel="stylesheet" href="http://localhost:4000/assets/css/style.css?v=">
    </head>
    <body>
        
        <header class="site-header" role="banner">

  <div class="wrapper">
    
    

    
      <a class="site-title" href="http://localhost:4000/posts">Ashish Vishwakarma</a>
    

    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
              
                <a class="page-link" href="http://localhost:4000/contact.html">Contact Me</a>
              
            
          
        </div>
      </nav>
    
  </div>
</header>

        
        
        
        
        
        <section class="page-header">
            <h1 class="project-name">Get Access Token for Google Service Account using C#</h1>
            <h2 class="project-tagline"></h2>
            
            <!-- Post tagline -->
            
            <h2 class="project-date">
                <time datetime="2017-10-11T00:18:01+05:30" itemprop="datePublished">
                    
                    Oct 11, 2017
                </time>
                
                
            </h2>
            
            <!-- End: Post tagline -->
        </section>
        
        <section class="main-content">
            
                <article itemscope itemtype="http://schema.org/BlogPosting">

        <!-- <header class="post-header">
      <h1 class="post-title" itemprop="name headline">Get Access Token for Google Service Account using C#</h1>
      <p class="post-meta">
        <time datetime="2017-10-11T00:18:01+05:30" itemprop="datePublished">
          
          Oct 11, 2017
        </time>
        </p>
    </header> -->

        <article itemprop="articleBody">
            <p>Service Accounts are used for server to server communication so user don’t need to interact for Authentication.</p>

<h2 id="section-1-generate-keys-for-google-service-account">Section 1: Generate Keys for Google Service Account</h2>

<p>If you haven’t generated keys yet follow steps to generate one or skip to next section</p>

<p>Go to <a href="https://console.developers.google.com/permissions/serviceaccounts">https://console.developers.google.com/permissions/serviceaccounts</a></p>

<p><img src="/assets/2017-10-11/image_0.png" alt="image alt text" /></p>

<p>Select project for which you want service account.</p>

<p><img src="/assets/2017-10-11/image_1.png" alt="image alt text" /></p>

<p>Create new service account here, roles and permission you can ad as per your use cases.</p>

<p><img src="/assets/2017-10-11/image_2.png" alt="image alt text" /></p>

<p>Now beside your account name click options and then Create Key</p>

<p><img src="/assets/2017-10-11/image_3.png" alt="image alt text" /></p>

<p>Select your desired format and hit Create</p>

<p><img src="/assets/2017-10-11/image_4.png" alt="image alt text" /></p>

<p>I have generated both keys for demo</p>

<p><img src="/assets/2017-10-11/image_5.png" alt="image alt text" /></p>

<h2 id="section-2-generate-access-tokens">Section 2: Generate Access Tokens</h2>

<p>I have taken Console Application here, Install Google.Apis.Auth NuGet package. It will add all required dependencies.</p>

<p><img src="/assets/2017-10-11/image_6.png" alt="image alt text" /></p>

<p>Add key files to your project and set Copy to Output Directory as Copy Always or Copy if newer</p>

<p><img src="/assets/2017-10-11/image_7.png" alt="image alt text" /></p>

<h3 id="generate-token-form-json-key">Generate token form JSON key</h3>

<p>Write below code where jsonKeyFilePath is path to your JSON key file, and scopes takes all the scopes you required in your access token.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Get Access Token From JSON Key Async</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="jsonKeyFilePath"&gt;Path to your JSON Key file&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="scopes"&gt;Scopes required in access token&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;Access token as string Task&lt;/returns&gt;</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="nf">GetAccessTokenFromJSONKeyAsync</span><span class="p">(</span><span class="kt">string</span> <span class="n">jsonKeyFilePath</span><span class="p">,</span> <span class="k">params</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">scopes</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">stream</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileStream</span><span class="p">(</span><span class="n">jsonKeyFilePath</span><span class="p">,</span> <span class="n">FileMode</span><span class="p">.</span><span class="n">Open</span><span class="p">,</span> <span class="n">FileAccess</span><span class="p">.</span><span class="n">Read</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">GoogleCredential</span>
            <span class="p">.</span><span class="nf">FromStream</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span> <span class="c1">// Loads key file</span>
            <span class="p">.</span><span class="nf">CreateScoped</span><span class="p">(</span><span class="n">scopes</span><span class="p">)</span> <span class="c1">// Gathers scopes requested</span>
            <span class="p">.</span><span class="n">UnderlyingCredential</span> <span class="c1">// Gets the credentials</span>
            <span class="p">.</span><span class="nf">GetAccessTokenForRequestAsync</span><span class="p">();</span> <span class="c1">// Gets the Access Token</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Above is an Asynchronous implementation, which can be optionally wrapped as Synchronous like given below.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Get Access Token From JSON Key</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="jsonKeyFilePath"&gt;Path to your JSON Key file&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="scopes"&gt;Scopes required in access token&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;Access token as string&lt;/returns&gt;</span>
<span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetAccessTokenFromJSONKey</span><span class="p">(</span><span class="kt">string</span> <span class="n">jsonKeyFilePath</span><span class="p">,</span> <span class="k">params</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">scopes</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nf">GetAccessTokenFromJSONKeyAsync</span><span class="p">(</span><span class="n">jsonKeyFilePath</span><span class="p">,</span> <span class="n">scopes</span><span class="p">).</span><span class="n">Result</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Let’s test it, for my Google project I have enabled Google Plus API, so I am requesting given user’s profile here.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">GetTokenAndCall</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="n">GoogleServiceAccount</span><span class="p">.</span><span class="nf">GetAccessTokenFromJSONKey</span><span class="p">(</span>
     <span class="s">"Keys/C-SharpCorner-0338f58d564f.json"</span><span class="p">,</span>
     <span class="s">"https://www.googleapis.com/auth/userinfo.profile"</span><span class="p">);</span>
    <span class="nf">WriteLine</span><span class="p">(</span><span class="k">new</span> <span class="nf">HttpClient</span><span class="p">().</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="s">$"https://www.googleapis.com/plus/v1/people/110259743757395873050?access_token=</span><span class="p">{</span><span class="n">token</span><span class="p">}</span><span class="s">"</span><span class="p">).</span><span class="n">Result</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>And call it.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Testing with JSON key</span>
    <span class="n">TestJSONKey</span><span class="p">.</span><span class="nf">GetTokenAndCall</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You will get response like this</p>

<p><img src="/assets/2017-10-11/image_8.png" alt="image alt text" /></p>

<h3 id="generate-token-form-p12-key">Generate token form P12 key</h3>

<p>Write below code where p12KeyFilePath is path to your JSON key file, serviceAccountEmail you can get from Google Developer Console, keyPassword will be asked while generating key by default it is “notasecret” and scopes takes all the scopes you required in your access token.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Get Access Token From P12 Key Async</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="p12KeyFilePath"&gt;Path to your P12 Key file&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="serviceAccountEmail"&gt;Service Account Email&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="keyPassword"&gt;Key Password&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="scopes"&gt;Scopes required in access token&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;Access token as string Task&lt;/returns&gt;</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="nf">GetAccessTokenFromP12KeyAsync</span><span class="p">(</span><span class="kt">string</span> <span class="n">p12KeyFilePath</span><span class="p">,</span> <span class="kt">string</span> <span class="n">serviceAccountEmail</span><span class="p">,</span> <span class="kt">string</span> <span class="n">keyPassword</span> <span class="p">=</span> <span class="s">"notasecret"</span><span class="p">,</span> <span class="k">params</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">scopes</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">await</span> <span class="k">new</span> <span class="nf">ServiceAccountCredential</span><span class="p">(</span>
        <span class="k">new</span> <span class="n">ServiceAccountCredential</span><span class="p">.</span><span class="nf">Initializer</span><span class="p">(</span><span class="n">serviceAccountEmail</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Scopes</span> <span class="p">=</span> <span class="n">scopes</span>
        <span class="p">}.</span><span class="nf">FromCertificate</span><span class="p">(</span>
            <span class="k">new</span> <span class="nf">X509Certificate2</span><span class="p">(</span>
                <span class="n">p12KeyFilePath</span><span class="p">,</span>
                <span class="n">keyPassword</span><span class="p">,</span>
                <span class="n">X509KeyStorageFlags</span><span class="p">.</span><span class="n">Exportable</span><span class="p">))).</span><span class="nf">GetAccessTokenForRequestAsync</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Above is an Asynchronous implementation, which can be optionally wrapped as Synchronous like given below.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Get Access Token From P12 Key</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="p12KeyFilePath"&gt;Path to your P12 Key file&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="serviceAccountEmail"&gt;Service Account Email&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="keyPassword"&gt;Key Password&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="scopes"&gt;Scopes required in access token&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;Access token as string&lt;/returns&gt;</span>
<span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetAccessTokenFromP12Key</span><span class="p">(</span><span class="kt">string</span> <span class="n">p12KeyFilePath</span><span class="p">,</span> <span class="kt">string</span> <span class="n">serviceAccountEmail</span><span class="p">,</span> <span class="kt">string</span> <span class="n">keyPassword</span><span class="p">,</span> <span class="k">params</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">scopes</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nf">GetAccessTokenFromP12KeyAsync</span><span class="p">(</span><span class="n">p12KeyFilePath</span><span class="p">,</span> <span class="n">serviceAccountEmail</span><span class="p">,</span> <span class="n">keyPassword</span><span class="p">,</span> <span class="n">scopes</span><span class="p">).</span><span class="n">Result</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Let’s test it.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">GetTokenAndCall</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">token</span> <span class="p">=</span> <span class="n">GoogleServiceAccount</span><span class="p">.</span><span class="nf">GetAccessTokenFromP12Key</span><span class="p">(</span>
        <span class="s">"Keys/C-SharpCorner-e0883ada1a3f.p12"</span><span class="p">,</span>
        <span class="s">"an-account@c-sharpcorner-2d7ae.iam.gserviceaccount.com"</span><span class="p">,</span>
        <span class="s">"notasecret"</span><span class="p">,</span>
        <span class="s">"https://www.googleapis.com/auth/userinfo.profile"</span>
        <span class="p">);</span>
    <span class="nf">WriteLine</span><span class="p">(</span><span class="k">new</span> <span class="nf">HttpClient</span><span class="p">().</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="s">$"https://www.googleapis.com/plus/v1/people/110259743757395873050?access_token=</span><span class="p">{</span><span class="n">token</span><span class="p">}</span><span class="s">"</span><span class="p">).</span><span class="n">Result</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>And call it.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Testing with P12 key</span>
   <span class="n">TestP12Key</span><span class="p">.</span><span class="nf">GetTokenAndCall</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You will get response like this</p>

<p><img src="/assets/2017-10-11/image_9.png" alt="image alt text" /></p>

<p>You can change the scopes and use access token according to your need, before making API call make sure to enable the same in Google Developer Console for given project.</p>

<p><a href="https://github.com/AshV/GoogleServiceAccountAccessToken-CSharp">Check GitHub repo for Complete Code</a></p>

            <hr />
            <center><a href="https://www.buymeacoffee.com/AshV" target="_blank"><img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee" style="height: auto !important;width: auto !important;"></a></center>
            <footer class="site-footer">
                <div id="disqus_thread"></div>
                <script>(function () { var d = document, s = d.createElement('script'); s.src = 'https://ashish-vishwakarma.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })();</script>
                <span class="site-footer-credits">©<a href="https://www.ashishvishwakarma.com/">Ashish Vishwakarma</a>. | <a href="https://www.ashishvishwakarma.com/posts">Read More Posts</a></span>
            </footer>
        </article>
        <script>(function (i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m) })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga'); ga('create', 'UA-88171590-1', 'auto'); ga('send', 'pageview');</script>
    </article>

            
            <footer class="site-footer">
                <!-- SVG icons from https://iconmonstr.com -->
                
                <!-- Github icon -->
                <span class="my-span-icon">
                    <a href="" aria-label="'s GitHub" title="'s GitHub">
                        <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    </a>
                </span>
                
                <!-- Twitter icon -->
                <span class="my-span-icon">
                    <a href="https://twitter.com/" aria-label="'s Twitter" title="'s Twitter">
                        <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
                    </a>
                </span>
                
                <!-- RSS icon -->
                
                
                <!-- Contact icon -->
                
                
                <span class="my-span-icon">
                    <a href="http://localhost:4000/contact.html" aria-label="Contact" title="Contact ">
                        <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
                    </a>
                </span>
                
                
            </footer>
        </section>
        
        <script>
            var menu = document.querySelector("nav.site-nav");
            var checkbox = document.getElementById("nav-trigger");
            
            // close menu if click outside menu
            document.addEventListener("click", function(e) {
                if (menu != e.target &&
                        !isDescendant(menu, e.target)) {
                    checkbox.checked = false;
                }
            }, false);
            
            function isDescendant(parent, child) {
                var node = child.parentNode;
                while (node != null) {
                    if (node == parent) {
                        return true;
                    }
                    node = node.parentNode;
                }
                return false;
            }  
        </script>
        
    </body>
    </html>
    